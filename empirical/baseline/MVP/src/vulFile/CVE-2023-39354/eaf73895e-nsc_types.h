
















typedef struct {
	wLog* log;

	BYTE* PlaneBuffers[5];     
	UINT32 PlaneBuffersLength; 

	
	PROFILER_DEFINE(prof_nsc_rle_decompress_data)
	PROFILER_DEFINE(prof_nsc_decode)
	PROFILER_DEFINE(prof_nsc_rle_compress_data)
	PROFILER_DEFINE(prof_nsc_encode)
} NSC_CONTEXT_PRIV;

struct S_NSC_CONTEXT {
	UINT32 OrgByteCount[4];
	UINT32 format;
	UINT16 width;
	UINT16 height;
	BYTE* BitmapData;
	UINT32 BitmapDataLength;

	BYTE* Planes;
	UINT32 PlaneByteCount[4];
	UINT32 ColorLossLevel;
	UINT32 ChromaSubsamplingLevel;
	BOOL DynamicColorFidelity;

	
	const BYTE* palette;

	BOOL (*decode)(NSC_CONTEXT* context);
	BOOL (*encode)(NSC_CONTEXT* context, const BYTE* BitmapData, UINT32 rowstride);

	NSC_CONTEXT_PRIV* priv;
};


