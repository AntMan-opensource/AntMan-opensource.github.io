





struct attq;
struct lsquic_conn;



struct attq_elem {
    struct lsquic_conn  *ae_conn;
    lsquic_time_t        ae_adv_time;
    unsigned             ae_heap_idx;
    
    enum ae_why {
        AEW_PACER, AEW_MINI_EXPIRE, N_AEWS }                    ae_why;


};


struct attq * lsquic_attq_create (void);

void lsquic_attq_destroy (struct attq *);


int lsquic_attq_add (struct attq *, struct lsquic_conn *, lsquic_time_t advisory_time, enum ae_why);


void lsquic_attq_remove (struct attq *, struct lsquic_conn *);

struct lsquic_conn * lsquic_attq_pop (struct attq *, lsquic_time_t cutoff);

unsigned lsquic_attq_count_before (struct attq *, lsquic_time_t cutoff);

const struct attq_elem * lsquic_attq_next (struct attq *);

const char * lsquic_attq_why2str (enum ae_why);


