









struct lsquic_conn_public;





struct http_prio_iter {
    const char                     *hpi_name;           
    struct lsquic_conn_public      *hpi_conn_pub;
    enum {
        HPI_MH_4K       = 1 << 0, HPI_MH_MALLOC   = 1 << 1, }                               hpi_flags;

    unsigned                        hpi_set[2];         
    unsigned                        hpi_counts[N_HPI_PRIORITIES];   
    unsigned                        hpi_heaped;         
    struct lsquic_streams_tailq     hpi_streams[2][N_HPI_PRIORITIES];
    struct min_heap                 hpi_min_heap;
    
    struct min_heap_elem            hpi_min_heap_els[236];
};


void lsquic_hpi_init (void *, struct lsquic_stream *first, struct lsquic_stream *last, uintptr_t next_ptr_offset, struct lsquic_conn_public *, const char *name, int (*filter)(void *filter_ctx, struct lsquic_stream *), void *filter_ctx);





struct lsquic_stream * lsquic_hpi_first (void *);

struct lsquic_stream * lsquic_hpi_next (void *);

void lsquic_hpi_drop_non_high (void *);

void lsquic_hpi_drop_high (void *);

void lsquic_hpi_cleanup (void *);





void lsquic_hpi_set_heap_test (int val);




