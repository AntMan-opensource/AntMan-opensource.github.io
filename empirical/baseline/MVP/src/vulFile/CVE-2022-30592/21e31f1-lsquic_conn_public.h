





struct lsquic_conn;
struct lsquic_engine_public;
struct lsquic_mm;
struct lsquic_hash;
struct headers_stream;
struct lsquic_send_ctl;

struct conn_stats;

struct qpack_enc_hdl;
struct qpack_dec_hdl;
struct network_path;

struct lsquic_conn_public {
    struct lsquic_streams_tailq     sending_streams,     read_streams, write_streams, service_streams;


    struct lsquic_hash             *all_streams;
    struct lsquic_cfcw              cfcw;
    struct lsquic_conn_cap          conn_cap;
    struct lsquic_rtt_stats         rtt_stats;
    struct lsquic_engine_public    *enpub;
    struct malo                    *packet_out_malo;
    struct lsquic_conn             *lconn;
    struct lsquic_mm               *mm;
    union {
        struct {
            struct headers_stream  *hs;
        }                       gquic;
        struct {
            struct qpack_enc_hdl *qeh;
            struct qpack_dec_hdl *qdh;
            struct hcso_writer   *hcso;
            struct lsquic_hash   *promises;
        }                       ietf;
    }                               u;
    enum {
        CP_STREAM_UNBLOCKED     = 1 << 0,    }                               cp_flags;
    struct lsquic_send_ctl         *send_ctl;

    struct conn_stats              *conn_stats;

    const struct network_path      *path;

    unsigned long                   stream_frame_bytes;
    unsigned                        wtp_level;  

    
    unsigned                        bytes_in;   
    unsigned                        bytes_out;
    
    lsquic_time_t                   last_tick, last_prog;
    unsigned                        max_peer_ack_usec;
    uint8_t                         n_special_streams;
};


