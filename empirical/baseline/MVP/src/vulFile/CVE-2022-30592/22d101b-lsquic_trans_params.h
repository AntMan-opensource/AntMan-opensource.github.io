






enum transport_param_id {
    
    TPI_MAX_IDLE_TIMEOUT, TPI_MAX_UDP_PAYLOAD_SIZE, TPI_INIT_MAX_DATA, TPI_INIT_MAX_STREAM_DATA_BIDI_LOCAL, TPI_INIT_MAX_STREAM_DATA_BIDI_REMOTE, TPI_INIT_MAX_STREAM_DATA_UNI, TPI_INIT_MAX_STREAMS_BIDI, TPI_INIT_MAX_STREAMS_UNI, TPI_ACK_DELAY_EXPONENT, TPI_MAX_ACK_DELAY, TPI_ACTIVE_CONNECTION_ID_LIMIT,         MAX_NUM_WITH_DEF_TPI = TPI_ACTIVE_CONNECTION_ID_LIMIT,   TPI_MIN_ACK_DELAY,  TPI_MIN_ACK_DELAY_02, TPI_TIMESTAMPS, TPI_MAX_DATAGRAM_FRAME_SIZE, TPI_LOSS_BITS,                          MAX_NUMERIC_TPI = TPI_LOSS_BITS,   TPI_GREASE_QUIC_BIT, TPI_DISABLE_ACTIVE_MIGRATION,           MAX_EMPTY_TPI = TPI_DISABLE_ACTIVE_MIGRATION,   TPI_PREFERRED_ADDRESS,   TPI_ORIGINAL_DEST_CID, TPI_INITIAL_SOURCE_CID,  TPI_RETRY_SOURCE_CID,  TPI_QUANTUM_READINESS,  TPI_STATELESS_RESET_TOKEN,              LAST_TPI = TPI_STATELESS_RESET_TOKEN };







































struct transport_params {
    
    unsigned                tp_set;

    
    unsigned                tp_decoded;

    uint64_t                tp_numerics[MAX_NUMERIC_TPI + 1];














    uint8_t     tp_stateless_reset_token[IQUIC_SRESET_TOKEN_SZ];
    struct {
        uint8_t         ipv4_addr[4];
        uint16_t        ipv4_port;
        uint8_t         ipv6_addr[16];
        uint16_t        ipv6_port;
        lsquic_cid_t    cid;
        uint8_t         srst[IQUIC_SRESET_TOKEN_SZ];
    }           tp_preferred_address;
    lsquic_cid_t    tp_cids[3];



};









































int lsquic_tp_encode (const struct transport_params *, int is_server, unsigned char *const buf, size_t bufsz);


int lsquic_tp_decode (const unsigned char *const buf, size_t bufsz,  int is_server, struct transport_params *);




void lsquic_tp_to_str (const struct transport_params *params, char *buf, size_t sz);

int lsquic_tp_encode_27 (const struct transport_params *, int is_server, unsigned char *const buf, size_t bufsz);


int lsquic_tp_decode_27 (const unsigned char *const buf, size_t bufsz, int is_server, struct transport_params *);



void lsquic_tp_to_str_27 (const struct transport_params *params, char *buf, size_t sz);

int lsquic_tp_has_pref_ipv4 (const struct transport_params *);

int lsquic_tp_has_pref_ipv6 (const struct transport_params *);

extern const char * const lsquic_tpi2str[LAST_TPI + 1];






size_t lsquic_tp_get_quantum_sz (void);





























