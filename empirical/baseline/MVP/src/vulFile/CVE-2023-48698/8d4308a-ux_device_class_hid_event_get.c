












 
 
















 
 
 
 
 






 
 
 
 
 
 
 
 
 
 
 
 
 
 

 
 
 
 
 
 
 
 
 







UINT  _ux_device_class_hid_event_get(UX_SLAVE_CLASS_HID *hid,  UX_SLAVE_CLASS_HID_EVENT *hid_event)
{

UX_SLAVE_CLASS_HID_EVENT        *current_hid_event;
UX_SLAVE_DEVICE                 *device;

    
    UX_TRACE_IN_LINE_INSERT(UX_TRACE_DEVICE_CLASS_HID_EVENT_GET, hid, hid_event, 0, 0, UX_TRACE_DEVICE_CLASS_EVENTS, 0, 0)

                       
    device =  &_ux_system_slave -> ux_system_slave_device;
    
    
    if (device -> ux_slave_device_state != UX_DEVICE_CONFIGURED)
        return(UX_DEVICE_HANDLE_UNKNOWN);

    
    if (hid -> ux_device_class_hid_event_array_head ==  hid -> ux_device_class_hid_event_array_tail)

        
        return(UX_ERROR);        

    
    current_hid_event =  hid -> ux_device_class_hid_event_array_tail;

    
    if (current_hid_event -> ux_device_class_hid_event_length > UX_DEVICE_CLASS_HID_EVENT_BUFFER_LENGTH)
        current_hid_event -> ux_device_class_hid_event_length = UX_DEVICE_CLASS_HID_EVENT_BUFFER_LENGTH;

    
    hid_event -> ux_device_class_hid_event_length =  current_hid_event -> ux_device_class_hid_event_length;
    _ux_utility_memory_copy(hid_event -> ux_device_class_hid_event_buffer, current_hid_event -> ux_device_class_hid_event_buffer, current_hid_event -> ux_device_class_hid_event_length);

    
    if ((current_hid_event + 1) == hid -> ux_device_class_hid_event_array_end)

        
        hid -> ux_device_class_hid_event_array_tail =  hid -> ux_device_class_hid_event_array;
        
    else          hid -> ux_device_class_hid_event_array_tail++;


    
    return(UX_SUCCESS);
}

