




















































































UINT _ux_device_class_cdc_acm_write_with_callback(UX_SLAVE_CLASS_CDC_ACM *cdc_acm, UCHAR *buffer, ULONG requested_length)
{

    UX_PARAMETER_NOT_USED(cdc_acm);
    UX_PARAMETER_NOT_USED(buffer);
    UX_PARAMETER_NOT_USED(requested_length);
    return(UX_FUNCTION_NOT_SUPPORTED);

UX_SLAVE_DEVICE             *device;
UINT                        status;

    
    UX_TRACE_IN_LINE_INSERT(UX_TRACE_DEVICE_CLASS_CDC_ACM_WRITE, cdc_acm, buffer, requested_length, 0, UX_TRACE_DEVICE_CLASS_EVENTS, 0, 0)

    
    device =  &_ux_system_slave -> ux_system_slave_device;

    
    if (device -> ux_slave_device_state != UX_DEVICE_CONFIGURED)
    {

        
        _ux_system_error_handler(UX_SYSTEM_LEVEL_THREAD, UX_SYSTEM_CONTEXT_CLASS, UX_CONFIGURATION_HANDLE_UNKNOWN);

        
        UX_TRACE_IN_LINE_INSERT(UX_TRACE_ERROR, UX_CONFIGURATION_HANDLE_UNKNOWN, device, 0, 0, UX_TRACE_ERRORS, 0, 0)

        
        return(UX_CONFIGURATION_HANDLE_UNKNOWN);
    }

    
    if (cdc_acm -> ux_slave_class_cdc_acm_transmission_status != UX_TRUE)
    {

        
        return(UX_ERROR);

    }

    
    if (cdc_acm -> ux_slave_class_cdc_acm_scheduled_write == UX_TRUE)
    {

        
        return(UX_ERROR);
    }



    
    cdc_acm -> ux_device_class_cdc_acm_write_requested_length = requested_length;

    
    cdc_acm -> ux_device_class_cdc_acm_write_buffer = buffer;

    
    cdc_acm -> ux_slave_class_cdc_acm_scheduled_write = UX_TRUE;

    
    status = (UX_SUCCESS);


    
    cdc_acm -> ux_slave_class_cdc_acm_callback_total_length = requested_length;

    
    cdc_acm -> ux_slave_class_cdc_acm_callback_data_pointer = buffer;

    
    cdc_acm -> ux_slave_class_cdc_acm_scheduled_write = UX_TRUE;

    
    status = _ux_device_event_flags_set(&cdc_acm -> ux_slave_class_cdc_acm_event_flags_group, UX_DEVICE_CLASS_CDC_ACM_WRITE_EVENT, UX_OR);


    
    return(status);

}

