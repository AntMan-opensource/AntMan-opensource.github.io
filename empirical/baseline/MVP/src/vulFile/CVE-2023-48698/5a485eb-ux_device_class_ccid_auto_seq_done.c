









































































UINT _ux_device_class_ccid_auto_seq_done(UX_DEVICE_CLASS_CCID *ccid, ULONG slot, ULONG icc_status)
{

UX_DEVICE_CLASS_CCID_SLOT       *ccid_slot;

    
    if (slot >= ccid -> ux_device_class_ccid_parameter.ux_device_class_ccid_max_n_slots)
        return(UX_INVALID_PARAMETER);

    
    ccid_slot  = ccid -> ux_device_class_ccid_slots;
    ccid_slot += slot;

    
    _ux_device_class_ccid_lock(ccid);

    
    if (ccid_slot -> ux_device_class_ccid_slot_flags & UX_DEVICE_CLASS_CCID_FLAG_AUTO_SEQUENCING)
    {
        ccid_slot -> ux_device_class_ccid_slot_icc_status = (UCHAR)icc_status;
        ccid_slot -> ux_device_class_ccid_slot_flags &= (UCHAR)~UX_DEVICE_CLASS_CCID_FLAG_AUTO_SEQUENCING;
    }

    
    _ux_device_class_ccid_unlock(ccid);

    
    return(UX_SUCCESS);
}
