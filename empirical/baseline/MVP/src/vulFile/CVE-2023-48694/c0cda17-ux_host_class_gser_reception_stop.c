













 
 
















 
 
 
 
 






 
 
 




 
 
 

 
 
 
 
 
 
 

 
 
 
 
 
 
 
 
 
 





UINT  _ux_host_class_gser_reception_stop (UX_HOST_CLASS_GSER *gser,  UX_HOST_CLASS_GSER_RECEPTION *gser_reception)
{

ULONG           interface_index;

    
    UX_TRACE_IN_LINE_INSERT(UX_TRACE_HOST_CLASS_GSER_RECEPTION_STOP, gser, 0, 0, 0, UX_TRACE_HOST_CLASS_EVENTS, 0, 0)

    
    if (gser -> ux_host_class_gser_state !=  UX_HOST_CLASS_INSTANCE_LIVE)
    {       

        
        UX_TRACE_IN_LINE_INSERT(UX_TRACE_ERROR, UX_HOST_CLASS_INSTANCE_UNKNOWN, gser, 0, 0, UX_TRACE_ERRORS, 0, 0)

        return(UX_HOST_CLASS_INSTANCE_UNKNOWN);
    }

    
    if (gser_reception -> ux_host_class_gser_reception_state ==  UX_HOST_CLASS_GSER_RECEPTION_STATE_STOPPED)
        return(UX_SUCCESS);
        
    
    interface_index = gser_reception -> ux_host_class_gser_reception_interface_index;

    
    _ux_host_stack_endpoint_transfer_abort(gser -> ux_host_class_gser_interface_array[interface_index].ux_host_class_gser_bulk_in_endpoint);

    
    gser_reception -> ux_host_class_gser_reception_state =  UX_HOST_CLASS_GSER_RECEPTION_STATE_STOPPED;

    
    return(UX_SUCCESS);
}

