











EipStatus NvdataLoad(void) {
  
  EipStatus eip_status = NvQosLoad(&g_qos);
  if (kEipStatusError != eip_status) {
    eip_status = (kEipStatusError == NvQosStore(&g_qos) ) ? kEipStatusError : eip_status;
  }

  return eip_status;
}


EipStatus NvQosSetCallback(CipInstance *const instance, CipAttributeStruct *const attribute, CipByte service) {

  EipStatus status = kEipStatusOk;

  if (0 != (kNvDataFunc & attribute->attribute_flags) ) {
    OPENER_TRACE_INFO("NV data update: %s, i %" PRIu32 ", a %" PRIu16 "\n", instance->cip_class->class_name, instance->instance_number, attribute->attribute_number);


    status = NvQosStore(&g_qos);
  }
  return status;
}


EipStatus NvTcpipSetCallback(CipInstance *const instance, CipAttributeStruct *const attribute, CipByte service) {

  EipStatus status = kEipStatusOk;

  if (0 != (kNvDataFunc & attribute->attribute_flags) ) {
    
    if (0 == (0x80 & service) ) {
      OPENER_TRACE_INFO("NV data update: %s, i %" PRIu32 ", a %" PRIu16 "\n", instance->cip_class->class_name, instance->instance_number, attribute->attribute_number);


      status = NvTcpipStore(&g_tcpip);
    }
  }
  return status;
}
