commit 2f0430ecda4dc83b5a3feaa3bea4826d1840dc68
Author: Dirk Farin <dirk.farin@gmail.com>
Date:   Wed Jan 25 19:43:20 2023 +0100

    image's ctb_info has to be reallocated also when dimensions change (even if total number of CTBs stays the same). Fixes #369

diff --git a/libde265/image.cc b/libde265/image.cc
index 07e4a22d..39813b04 100644
--- a/libde265/image.cc
+++ b/libde265/image.cc
@@ -445,7 +445,8 @@ de265_error de265_image::alloc_image(int w,int h, enum de265_chroma c,
 
     // CTB info
 
-    if (ctb_info.data_size != sps->PicSizeInCtbsY)
+    if (ctb_info.width_in_units != sps->PicWidthInCtbsY ||
+        ctb_info.height_in_units != sps->PicHeightInCtbsY)
       {
         delete[] ctb_progress;
 
