commit 8e1cc30ffd687c64ecf4c7cf6f3a32de626d5023
Author: Thomas Bernard <miniupnp@free.fr>
Date:   Fri Jul 21 21:56:15 2023 +0200

    error checking of SDL_CreateRGBSurface()
    
    fixes #29

diff --git a/ngiflibSDL.c b/ngiflibSDL.c
index a19b2e4..28bcac1 100644
--- a/ngiflibSDL.c
+++ b/ngiflibSDL.c
@@ -176,6 +176,10 @@ struct ngiflibSDL_animation * SDL_LoadAnimatedGif(const char * file)
 		surface = SDL_CreateRGBSurface(SDL_SWSURFACE | SDL_SRCCOLORKEY,
 		                               gif->width, gif->height, 8,
 									   0,0,0,0);
+		if (surface == NULL) {
+			fprintf(stderr, "SDL_CreateRGBSurface(..., %d, %d, 8, ...) failed : %s\n", gif->width, gif->height, SDL_GetError());
+			continue;
+		}
 		SDL_LockSurface(surface);
 		/*
 		if(gif->transparent_flag) {
