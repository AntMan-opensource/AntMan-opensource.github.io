commit 84a750338394bbd2f8ff15811e2098bd9634180a
Author: Thomas Bernard <miniupnp@free.fr>
Date:   Sat Jul 15 01:46:02 2023 +0200

    Correctly use the currently selected palette
    
    fix #26
    fix 5e7292bfabbeeee8dca0bf4c9a77ff10c8e3bf28

diff --git a/gif2tga.c b/gif2tga.c
index dd38ab4..3609ce4 100644
--- a/gif2tga.c
+++ b/gif2tga.c
@@ -166,9 +166,9 @@ int main(int argc, char * * argv) {
 			putc(8, ftga);	/* bits per pixel */
 			putc(32, ftga);	/* top down       */
 			for(i = 0; i < current_palette_size; i++) {
-				putc(img->palette[i].b, ftga);
-				putc(img->palette[i].g, ftga);
-				putc(img->palette[i].r, ftga);
+				putc(current_palette[i].b, ftga);
+				putc(current_palette[i].g, ftga);
+				putc(current_palette[i].r, ftga);
 			}
 			fwrite(gif->frbuff.p8, 1,
 			      (size_t)gif->width * (size_t)gif->height, ftga);
