commit d99636fad60629785efd1ef72da772a8ef68f54c
Author: zhailiangliang <zhailiangliang@loongson.cn>
Date:   Wed Jul 20 08:58:31 2022 +0000

    fix memory leaks in function cmdopts_parse

diff --git a/src/app/jasper.c b/src/app/jasper.c
index 9bf58a9..7c8981d 100644
--- a/src/app/jasper.c
+++ b/src/app/jasper.c
@@ -534,6 +534,7 @@ cmdopts_t *cmdopts_parse(int argc, char **argv)
 			cmdopts->enable_all_formats = 1;
 			break;
 		default:
+			cmdopts_destroy(cmdopts);
 			badusage();
 			break;
 		}
@@ -552,6 +553,7 @@ cmdopts_t *cmdopts_parse(int argc, char **argv)
 
 	if (!cmdopts->outfmt_str && !cmdopts->outfile) {
 		fprintf(stderr, "error: cannot determine output format\n");
+		cmdopts_destroy(cmdopts);
 		badusage();
 	}
 
