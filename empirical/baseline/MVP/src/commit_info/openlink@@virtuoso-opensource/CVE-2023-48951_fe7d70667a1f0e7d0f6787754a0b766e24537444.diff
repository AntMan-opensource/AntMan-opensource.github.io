commit fe7d70667a1f0e7d0f6787754a0b766e24537444
Author: Mitko Iliev <imitko@openlinksw.com>
Date:   Wed Nov 15 10:50:58 2023 +0100

    Fixed check constraint cannot use CONTAINS text predicate (fixes #1177)

diff --git a/libsrc/Wi/ddlrun.c b/libsrc/Wi/ddlrun.c
index 018365c07..c61b4f42e 100644
--- a/libsrc/Wi/ddlrun.c
+++ b/libsrc/Wi/ddlrun.c
@@ -3631,9 +3631,17 @@ ddl_table_check_constraints_define_triggers (query_instance_t * qi, caddr_t tb_n
     {
       ST *st = NULL;
       ST *cmpd;
+      int dummy = 0;
       query_t *qr;
       local_cursor_t *lc = NULL;
 
+      if (ST_P (check_cond, BOP_NOT) && NULL != sqlc_contains_args (check_cond->_.bin_exp.left, &dummy))
+        {
+          if (qi)
+            QI_POISON_TRX (qi);
+          sqlr_new_error ("42000", "SR362", "Check constraint cannot use CONTAINS/XCONTAINS predicates");
+        }
+
 
       if (qi)
 	{
