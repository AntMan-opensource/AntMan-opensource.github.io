commit 3517fb726741c109cae7995f9ea46f0cab6187d6
Author: Song Gao <gaosong@loongson.cn>
Date:   Tue Jul 5 15:09:50 2022 +0800

    target/loongarch: Clean up tlb when cpu reset
    
    We should make sure that tlb is clean when cpu reset.
    
    Signed-off-by: Song Gao <gaosong@loongson.cn>
    Message-Id: <20220705070950.2364243-1-gaosong@loongson.cn>
    Reviewed-by: Richard Henderson <richard.henderson@linaro.org>
    Signed-off-by: Richard Henderson <richard.henderson@linaro.org>

diff --git a/target/loongarch/cpu.c b/target/loongarch/cpu.c
index d2d4667a34..e21715592a 100644
--- a/target/loongarch/cpu.c
+++ b/target/loongarch/cpu.c
@@ -479,6 +479,7 @@ static void loongarch_cpu_reset(DeviceState *dev)
 
 #ifndef CONFIG_USER_ONLY
     env->pc = 0x1c000000;
+    memset(env->tlb, 0, sizeof(env->tlb));
 #endif
 
     restore_fp_status(env);
