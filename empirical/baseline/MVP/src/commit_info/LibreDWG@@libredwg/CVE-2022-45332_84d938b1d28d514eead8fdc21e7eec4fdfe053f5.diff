commit 84d938b1d28d514eead8fdc21e7eec4fdfe053f5
Author: Reini Urban <rurban@cpan.org>
Date:   Wed Nov 23 08:07:53 2022 +0100

    decode_r11: failing dwg_get_first_object TABLE_CONTROL
    
    Fixed GH #524.

diff --git a/src/decode_r11.c b/src/decode_r11.c
index 7db9052c..6d14edc7 100644
--- a/src/decode_r11.c
+++ b/src/decode_r11.c
@@ -263,8 +263,8 @@ decode_preR13_section (Dwg_Section_Type_r11 id, Bit_Chain *restrict dat,
   Dwg_Object_##token *_obj;                                                   \
   Dwg_Object *ctrl = dwg_get_first_object (dwg, DWG_TYPE_##token##_CONTROL);  \
   Dwg_Object_##token##_CONTROL *_ctrl                                         \
-      = ctrl->tio.object->tio.token##_CONTROL;                                \
-  if (dat->byte > dat->size || (num + i) > dwg->num_objects)                  \
+    = ctrl ? ctrl->tio.object->tio.token##_CONTROL : NULL;                    \
+  if (!ctrl || dat->byte > dat->size || (num + i) > dwg->num_objects)         \
     return DWG_ERR_INVALIDDWG;                                                \
   flag = bit_read_RC (dat);                                                   \
   name = bit_read_TF (dat, 32);                                               \
@@ -465,8 +465,8 @@ decode_preR13_section (Dwg_Section_Type_r11 id, Bit_Chain *restrict dat,
             Dwg_Object *ctrl
                 = dwg_get_first_object (dwg, DWG_TYPE_UCS_CONTROL);
             Dwg_Object_UCS_CONTROL *_ctrl
-                = ctrl->tio.object->tio.UCS_CONTROL;
-            if (dat->byte > dat->size || (num + i) > dwg->num_objects)
+                = ctrl ? ctrl->tio.object->tio.UCS_CONTROL : NULL;
+            if (!ctrl || dat->byte > dat->size || (num + i) > dwg->num_objects)
               return DWG_ERR_INVALIDDWG;
             flag = bit_read_RC (dat);
             name = bit_read_TF (dat, 32);
