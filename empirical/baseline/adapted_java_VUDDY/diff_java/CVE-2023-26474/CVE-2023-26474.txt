commit 3c5ac0fa7921fef2dc2fbd89ecfeabf837e58d3b
Author: Thomas Mortagne <thomas.mortagne@gmail.com>
Date:   Thu Nov 17 16:29:26 2022 +0100

    XWIKI-20373: Fix textarea context setup
    * use 13.10.x compatible APIs

diff --git a/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/classes/TextAreaClass.java b/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/classes/TextAreaClass.java
index 783222d2974..73b8ee3494a 100644
--- a/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/classes/TextAreaClass.java
+++ b/xwiki-platform-core/xwiki-platform-oldcore/src/main/java/com/xpn/xwiki/objects/classes/TextAreaClass.java
@@ -414,10 +414,9 @@ public void displayView(StringBuffer buffer, String name, String prefix, BaseCol
 
                     // Make sure the right author is used to execute the textarea
                     // Clone the document to void messaging with the cache
-                    if (!Objects.equals(sdoc.getAuthors().getEffectiveMetadataAuthor(),
-                        sdoc.getAuthors().getContentAuthor())) {
+                    if (!Objects.equals(sdoc.getAuthorReference(), sdoc.getContentAuthorReference())) {
                         sdoc = sdoc.clone();
-                        sdoc.getAuthors().setContentAuthor(sdoc.getAuthors().getEffectiveMetadataAuthor());
+                        sdoc.setContentAuthorReference(sdoc.getAuthorReference());
                     }
 
                     buffer.append(
