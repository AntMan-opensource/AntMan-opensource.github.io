commit 403c0fd9907a3e1c7233c591b517eced68e3115e
Author: Qicz <qiczzhu@gmail.com>
Date:   Mon Mar 14 15:28:48 2022 +0800

    [type: refactor] trim condition param value. (#3039)
    
    * [type: refactor] trim condition param value.
    
    * [type: refactor] trim condition param value.

diff --git a/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/RuleConditionDO.java b/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/RuleConditionDO.java
index 3b8a064a2..cb58e2641 100644
--- a/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/RuleConditionDO.java
+++ b/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/RuleConditionDO.java
@@ -181,7 +181,7 @@ public final class RuleConditionDO extends BaseDO {
                     .ruleId(item.getRuleId())
                     .operator(item.getOperator())
                     .paramName(item.getParamName())
-                    .paramValue(item.getParamValue())
+                    .paramValue(StringUtils.defaultIfBlank(item.getParamValue(), "").trim())
                     .dateUpdated(currentTime)
                     .build();
             if (StringUtils.isEmpty(item.getId())) {
diff --git a/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/SelectorConditionDO.java b/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/SelectorConditionDO.java
index 995ca0e94..7f8577b89 100644
--- a/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/SelectorConditionDO.java
+++ b/shenyu-admin/src/main/java/org/apache/shenyu/admin/model/entity/SelectorConditionDO.java
@@ -181,7 +181,7 @@ public final class SelectorConditionDO extends BaseDO {
                     .selectorId(item.getSelectorId())
                     .operator(item.getOperator())
                     .paramName(item.getParamName())
-                    .paramValue(item.getParamValue())
+                    .paramValue(StringUtils.defaultIfBlank(item.getParamValue(), "").trim())
                     .dateUpdated(currentTime)
                     .build();
             if (StringUtils.isEmpty(item.getId())) {
diff --git a/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/RegexPredicateJudge.java b/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/RegexPredicateJudge.java
index dec42d276..370bdb56c 100644
--- a/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/RegexPredicateJudge.java
+++ b/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/RegexPredicateJudge.java
@@ -30,6 +30,6 @@ public class RegexPredicateJudge implements PredicateJudge {
 
     @Override
     public Boolean judge(final ConditionData conditionData, final String realData) {
-        return Pattern.matches(conditionData.getParamValue(), realData);
+        return Pattern.matches(conditionData.getParamValue().trim(), realData);
     }
 }
diff --git a/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerAfterPredicateJudge.java b/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerAfterPredicateJudge.java
index ddbaf2ba4..52ef2e179 100644
--- a/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerAfterPredicateJudge.java
+++ b/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerAfterPredicateJudge.java
@@ -34,8 +34,8 @@ public class TimerAfterPredicateJudge implements PredicateJudge {
     public Boolean judge(final ConditionData conditionData, final String realData) {
         String paramName = conditionData.getParamName();
         if (Objects.isNull(paramName)) {
-            return LocalDateTime.now().isAfter(DateUtils.parseLocalDateTime(conditionData.getParamValue()));
+            return LocalDateTime.now().isAfter(DateUtils.parseLocalDateTime(conditionData.getParamValue().trim()));
         }
-        return DateUtils.parseLocalDateTime(realData).isAfter(DateUtils.parseLocalDateTime(conditionData.getParamValue()));
+        return DateUtils.parseLocalDateTime(realData).isAfter(DateUtils.parseLocalDateTime(conditionData.getParamValue().trim()));
     }
 }
diff --git a/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerBeforePredicateJudge.java b/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerBeforePredicateJudge.java
index 9c96138c0..82d0d2fec 100644
--- a/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerBeforePredicateJudge.java
+++ b/shenyu-plugin/shenyu-plugin-base/src/main/java/org/apache/shenyu/plugin/base/condition/judge/TimerBeforePredicateJudge.java
@@ -34,8 +34,8 @@ public class TimerBeforePredicateJudge implements PredicateJudge {
     public Boolean judge(final ConditionData conditionData, final String realData) {
         String paramName = conditionData.getParamName();
         if (StringUtils.isEmpty(paramName)) {
-            return LocalDateTime.now().isBefore(DateUtils.parseLocalDateTime(conditionData.getParamValue()));
+            return LocalDateTime.now().isBefore(DateUtils.parseLocalDateTime(conditionData.getParamValue().trim()));
         }
-        return DateUtils.parseLocalDateTime(realData).isBefore(DateUtils.parseLocalDateTime(conditionData.getParamValue()));
+        return DateUtils.parseLocalDateTime(realData).isBefore(DateUtils.parseLocalDateTime(conditionData.getParamValue().trim()));
     }
 }
