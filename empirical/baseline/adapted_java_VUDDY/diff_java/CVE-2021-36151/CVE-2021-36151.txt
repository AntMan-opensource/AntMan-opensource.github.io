commit 520eca8938231494bddd5c477e07ec71c7da653f
Author: treff7es <treff7es@apache.org>
Date:   Tue Feb 23 22:17:02 2021 +0100

    [GOBBLIN-1392] Replacing unsafe File.createTempfile to java nio's Files.createTempFile
    
    Closes #3230 from
    treff7es/safe_temporary_file_creation

diff --git a/gobblin-modules/gobblin-azkaban/src/main/java/org/apache/gobblin/azkaban/AzkabanJobLauncher.java b/gobblin-modules/gobblin-azkaban/src/main/java/org/apache/gobblin/azkaban/AzkabanJobLauncher.java
index c43360dbe..0d143b11f 100644
--- a/gobblin-modules/gobblin-azkaban/src/main/java/org/apache/gobblin/azkaban/AzkabanJobLauncher.java
+++ b/gobblin-modules/gobblin-azkaban/src/main/java/org/apache/gobblin/azkaban/AzkabanJobLauncher.java
@@ -19,10 +19,10 @@ package org.apache.gobblin.azkaban;
 
 import java.io.File;
 import java.io.IOException;
+import java.nio.file.Files;
 import java.util.List;
 import java.util.Map;
 import java.util.Properties;
-import java.util.Set;
 import java.util.UUID;
 import java.util.concurrent.Callable;
 import java.util.concurrent.ExecutorService;
@@ -43,7 +43,6 @@ import com.google.common.base.Preconditions;
 import com.google.common.base.Splitter;
 import com.google.common.base.Strings;
 import com.google.common.collect.Lists;
-import com.google.common.collect.Sets;
 import com.google.common.io.Closer;
 import com.typesafe.config.Config;
 import com.typesafe.config.ConfigValue;
@@ -182,7 +181,7 @@ public class AzkabanJobLauncher extends AbstractJob implements ApplicationLaunch
         LOG.info(
             "Job type " + props.getProperty(JOB_TYPE) + " did not provide Hadoop token in the environment variable " + HADOOP_TOKEN_FILE_LOCATION + ". Negotiating Hadoop tokens.");
 
-        File tokenFile = File.createTempFile("mr-azkaban", ".token");
+        File tokenFile = Files.createTempFile("mr-azkaban", ".token").toFile();
         TokenUtils.getHadoopTokens(new State(props), Optional.of(tokenFile), new Credentials());
 
         System.setProperty(HADOOP_TOKEN_FILE_LOCATION, tokenFile.getAbsolutePath());
diff --git a/gobblin-utility/src/main/java/org/apache/gobblin/util/DownloadUtils.java b/gobblin-utility/src/main/java/org/apache/gobblin/util/DownloadUtils.java
index 1a8c54391..471bf44b0 100644
--- a/gobblin-utility/src/main/java/org/apache/gobblin/util/DownloadUtils.java
+++ b/gobblin-utility/src/main/java/org/apache/gobblin/util/DownloadUtils.java
@@ -24,6 +24,7 @@ import java.io.IOException;
 import java.io.OutputStream;
 import java.net.URI;
 import java.net.URL;
+import java.nio.file.Files;
 import java.security.AccessController;
 import java.security.PrivilegedAction;
 import java.util.Map;
@@ -108,7 +109,7 @@ public class DownloadUtils {
     }
 
     // Create temporary Ivy settings file.
-    ivySettingsFile = File.createTempFile("ivy.settings", ".xml");
+    ivySettingsFile = Files.createTempFile("ivy.settings", ".xml").toFile();
     ivySettingsFile.deleteOnExit();
 
     try (OutputStream os = new BufferedOutputStream(new FileOutputStream(ivySettingsFile))) {
