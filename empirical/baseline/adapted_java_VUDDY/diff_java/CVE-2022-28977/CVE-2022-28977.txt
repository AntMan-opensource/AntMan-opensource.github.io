commit 6389885476414d3cd9e3092b4708906a5bdc8a48
Author: arthurchan35 <arthurchan35@gmail.com>
Date:   Mon Aug 2 13:04:06 2021 +0800

    LPS-134833 Simpily no need to usee authority to tell if it's relative

diff --git a/portal-impl/src/com/liferay/portal/util/PortalImpl.java b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
index 6a460827a9bf9..b70ae1eb0d598 100644
--- a/portal-impl/src/com/liferay/portal/util/PortalImpl.java
+++ b/portal-impl/src/com/liferay/portal/util/PortalImpl.java
@@ -948,28 +948,16 @@ public class PortalImpl implements Portal {
 			return null;
 		}
 
-		String authority = uri.getAuthority();
+		String path = uri.getPath();
 
-		String protocol = uri.getScheme();
-
-		// When authority is empty, only return when it's a valid relative URL
-
-		if (authority == null) {
-			if (uri.getPath() == null) {
-				return null;
-			}
-
-			// Specs allow URL of protocol followed by path, but we do not
-
-			if (protocol != null) {
-				return null;
-			}
-
-			// The URL is a relative path
+		// Return when it's a relative URL
 
+		if (Validator.isNotNull(path) && url.startsWith(path)) {
 			return url;
 		}
 
+		String protocol = uri.getScheme();
+
 		// Specs regard URL starting with double slashes as valid, but we do not
 
 		if (protocol == null) {
