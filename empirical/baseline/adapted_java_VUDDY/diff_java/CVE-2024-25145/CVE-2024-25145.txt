commit 983007f2fcf4657c092065e56c0d7c17df5dfaa3
Author: Kevin Tan <kevin.tan@liferay.com>
Date:   Tue Jan 25 17:49:05 2022 -0800

    LPS-121100 portal-search: Update non-highlighted title and content

diff --git a/modules/apps/portal-search/portal-search/src/main/java/com/liferay/portal/search/internal/summary/SummaryBuilderImpl.java b/modules/apps/portal-search/portal-search/src/main/java/com/liferay/portal/search/internal/summary/SummaryBuilderImpl.java
index 4ca9a45cdf33f..b1d33f4e4586f 100644
--- a/modules/apps/portal-search/portal-search/src/main/java/com/liferay/portal/search/internal/summary/SummaryBuilderImpl.java
+++ b/modules/apps/portal-search/portal-search/src/main/java/com/liferay/portal/search/internal/summary/SummaryBuilderImpl.java
@@ -77,21 +77,23 @@ public class SummaryBuilderImpl implements SummaryBuilder {
 			return _buildContentHighlighted();
 		}
 
-		return _buildContentPlain();
+		return _buildContentPlain(_content);
 	}
 
 	private String _buildContentHighlighted() {
 		return _escapeAndHighlight(_content);
 	}
 
-	private String _buildContentPlain() {
-		if ((_maxContentLength <= 0) ||
-			(_content.length() <= _maxContentLength)) {
+	private String _buildContentPlain(String text) {
+		if (_escape) {
+			text = _html.escape(text);
+		}
 
-			return _content;
+		if ((_maxContentLength <= 0) || (text.length() <= _maxContentLength)) {
+			return text;
 		}
 
-		return StringUtil.shorten(_content, _maxContentLength);
+		return StringUtil.shorten(text, _maxContentLength);
 	}
 
 	private String _buildTitle() {
@@ -103,6 +105,10 @@ public class SummaryBuilderImpl implements SummaryBuilder {
 			return _buildTitleHighlighted();
 		}
 
+		if (_escape) {
+			return _html.escape(_title);
+		}
+
 		return _title;
 	}
 
