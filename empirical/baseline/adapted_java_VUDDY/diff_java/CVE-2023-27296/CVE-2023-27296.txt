commit 1ec92895349b4af0c866dedbbddae0e974cf64e9
Author: fuweng11 <76141879+fuweng11@users.noreply.github.com>
Date:   Fri Feb 24 15:41:04 2023 +0800

    [INLONG-7421][Manager] Add encoding check to the MySQL JDBC URL in MySQLDataNode (#7422)

diff --git a/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/node/mysql/MySQLDataNodeDTO.java b/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/node/mysql/MySQLDataNodeDTO.java
index d4e0b6f50..2b70f79aa 100644
--- a/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/node/mysql/MySQLDataNodeDTO.java
+++ b/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/node/mysql/MySQLDataNodeDTO.java
@@ -27,6 +27,7 @@ import org.apache.commons.lang3.StringUtils;
 import org.apache.inlong.manager.common.enums.ErrorCodeEnum;
 import org.apache.inlong.manager.common.exceptions.BusinessException;
 import org.apache.inlong.manager.common.util.JsonUtils;
+import org.apache.inlong.manager.pojo.sink.mysql.MySQLSinkDTO;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
@@ -77,6 +78,6 @@ public class MySQLDataNodeDTO {
         if (StringUtils.isNotBlank(jdbcUrl) && !jdbcUrl.startsWith(MYSQL_JDBC_PREFIX)) {
             jdbcUrl = MYSQL_JDBC_PREFIX + jdbcUrl;
         }
-        return jdbcUrl;
+        return MySQLSinkDTO.filterSensitive(jdbcUrl);
     }
 }
diff --git a/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/sink/mysql/MySQLSinkDTO.java b/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/sink/mysql/MySQLSinkDTO.java
index 77b4128ec..216c9b71d 100644
--- a/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/sink/mysql/MySQLSinkDTO.java
+++ b/inlong-manager/manager-pojo/src/main/java/org/apache/inlong/manager/pojo/sink/mysql/MySQLSinkDTO.java
@@ -17,7 +17,6 @@
 
 package org.apache.inlong.manager.pojo.sink.mysql;
 
-import com.google.common.annotations.VisibleForTesting;
 import com.google.common.base.Strings;
 import io.swagger.annotations.ApiModelProperty;
 import lombok.AllArgsConstructor;
@@ -217,8 +216,7 @@ public class MySQLSinkDTO {
      * @param url str may have some sensitive params
      * @return str without sensitive param
      */
-    @VisibleForTesting
-    protected static String filterSensitive(String url) {
+    public static String filterSensitive(String url) {
         if (StringUtils.isBlank(url)) {
             return url;
         }
