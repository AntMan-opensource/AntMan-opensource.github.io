commit 32deed892eecdb3f12a06b4d2178f93d5cc71106
Author: JÃ¼rgen Kappler <jurgen.kappler@liferay.com>
Date:   Wed Dec 1 13:38:09 2021 +0100

    LPS-143143 Use StringUtil for substitution

diff --git a/modules/apps/layout/layout-page-template-service/src/main/java/com/liferay/layout/page/template/internal/upgrade/v3_3_1/LayoutPageTemplateEntryUpgradeProcess.java b/modules/apps/layout/layout-page-template-service/src/main/java/com/liferay/layout/page/template/internal/upgrade/v3_3_1/LayoutPageTemplateEntryUpgradeProcess.java
index 5b569150985eb..1004d5c8512ea 100644
--- a/modules/apps/layout/layout-page-template-service/src/main/java/com/liferay/layout/page/template/internal/upgrade/v3_3_1/LayoutPageTemplateEntryUpgradeProcess.java
+++ b/modules/apps/layout/layout-page-template-service/src/main/java/com/liferay/layout/page/template/internal/upgrade/v3_3_1/LayoutPageTemplateEntryUpgradeProcess.java
@@ -134,7 +134,8 @@ public class LayoutPageTemplateEntryUpgradeProcess extends UpgradeProcess {
 			return;
 		}
 
-		nameMap.put(locale, defaultName.replaceFirst(oldName, newName));
+		nameMap.put(
+			locale, StringUtil.replaceFirst(defaultName, oldName, newName));
 
 		_layoutPrototypeLocalService.updateLayoutPrototype(
 			layoutPrototypeId, nameMap, layoutPrototype.getDescriptionMap(),
