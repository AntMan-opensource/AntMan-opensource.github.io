commit 4ad03b85523f8f694147c24803fb72063e82c57c
Author: Misagh Moayyed <mm1844@gmail.com>
Date:   Tue Feb 21 09:25:56 2023 +0400

    clear ldap config initializer before connection

diff --git a/support/cas-server-support-x509-core/src/main/java/org/apereo/cas/adaptors/x509/authentication/ldap/LdaptiveResourceCRLFetcher.java b/support/cas-server-support-x509-core/src/main/java/org/apereo/cas/adaptors/x509/authentication/ldap/LdaptiveResourceCRLFetcher.java
index 28b1f4f1269..92c3d18094b 100644
--- a/support/cas-server-support-x509-core/src/main/java/org/apereo/cas/adaptors/x509/authentication/ldap/LdaptiveResourceCRLFetcher.java
+++ b/support/cas-server-support-x509-core/src/main/java/org/apereo/cas/adaptors/x509/authentication/ldap/LdaptiveResourceCRLFetcher.java
@@ -149,6 +149,9 @@ public class LdaptiveResourceCRLFetcher extends ResourceCRLFetcher {
      */
     protected ConnectionFactory prepareConnectionFactory(final String ldapURL) {
         val config = ConnectionConfig.copy(this.connectionConfig);
+        if (!config.getLdapUrl().equalsIgnoreCase(ldapURL)) {
+            config.setConnectionInitializers();
+        }
         config.setLdapUrl(ldapURL);
         return new DefaultConnectionFactory(config);
     }
