commit cc11563730e31993d332b52926a8f4b19f92936d
Author: UrsLange <urs.lange@unitedplanet.com>
Date:   Mon Apr 4 12:21:02 2022 +0200

    Fix OOME when result file contains multiple suites (#25)

diff --git a/src/main/java/com/google/jenkins/flakyTestHandler/junit/FlakyTestResult.java b/src/main/java/com/google/jenkins/flakyTestHandler/junit/FlakyTestResult.java
index e8819e3..829b7dd 100644
--- a/src/main/java/com/google/jenkins/flakyTestHandler/junit/FlakyTestResult.java
+++ b/src/main/java/com/google/jenkins/flakyTestHandler/junit/FlakyTestResult.java
@@ -30,8 +30,10 @@ import java.io.StringWriter;
 import java.util.ArrayList;
 import java.util.Collection;
 import java.util.HashMap;
+import java.util.HashSet;
 import java.util.List;
 import java.util.Map;
+import java.util.Set;
 import java.util.TreeMap;
 
 import hudson.AbortException;
@@ -116,9 +118,15 @@ public final class FlakyTestResult extends MetaTabulatedResult {
    * @param testResult result of tests
    */
   public FlakyTestResult(TestResult testResult) {
+
+    Set<String> resultFiles = new HashSet<>();
     for (SuiteResult suiteResult : testResult.getSuites()) {
+      resultFiles.add(suiteResult.getFile());
+    }
+
+    for (String resultFile : resultFiles) {
       try {
-        suites.addAll(FlakySuiteResult.parse(new File(suiteResult.getFile()), true));
+        suites.addAll(FlakySuiteResult.parse(new File(resultFile), true));
         testResultInstance = testResult;
       } catch (DocumentException | IOException | InterruptedException | NullPointerException | SAXException e) {
         e.printStackTrace();
