commit b2e2dcaef30c3c9609e92ea56fc39e341fc0d193
Author: Drew Noakes <git@drewnoakes.com>
Date:   Sun Apr 3 16:33:26 2022 +1000

    Prevent NPE
    
    Contributes to drewnoakes/metadata-extractor#561

diff --git a/Source/com/drew/metadata/mov/atoms/canon/CanonThumbnailAtom.java b/Source/com/drew/metadata/mov/atoms/canon/CanonThumbnailAtom.java
index c5a5d86c..34b15edf 100644
--- a/Source/com/drew/metadata/mov/atoms/canon/CanonThumbnailAtom.java
+++ b/Source/com/drew/metadata/mov/atoms/canon/CanonThumbnailAtom.java
@@ -13,6 +13,7 @@ import com.drew.imaging.jpeg.JpegSegmentReader;
 import com.drew.imaging.jpeg.JpegSegmentType;
 import com.drew.lang.SequentialReader;
 import com.drew.lang.StreamReader;
+import com.drew.lang.annotations.Nullable;
 import com.drew.metadata.Directory;
 import com.drew.metadata.Metadata;
 import com.drew.metadata.Tag;
@@ -23,11 +24,12 @@ import com.drew.metadata.mov.QuickTimeDirectory;
 import com.drew.metadata.mov.atoms.Atom;
 
 /**
- * 
+ *
  * @author PerB
  */
 public class CanonThumbnailAtom extends Atom
 {
+    @Nullable
     private String dateTime;
 
     public CanonThumbnailAtom(SequentialReader reader) throws IOException
@@ -75,6 +77,8 @@ public class CanonThumbnailAtom extends Atom
 
     public void addMetadata(QuickTimeDirectory directory)
     {
-        directory.setString(QuickTimeDirectory.TAG_CANON_THUMBNAIL_DT, dateTime);
+        if (dateTime != null) {
+            directory.setString(QuickTimeDirectory.TAG_CANON_THUMBNAIL_DT, dateTime);
+        }
     }
 }
