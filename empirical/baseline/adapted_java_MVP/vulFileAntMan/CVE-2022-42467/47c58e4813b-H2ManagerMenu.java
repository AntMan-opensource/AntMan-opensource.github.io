package org.apache.isis.testing.h2console.ui.services;
import javax.inject.Inject;
import javax.inject.Named;
import org.apache.isis.applib.IsisModuleApplib;
import org.apache.isis.applib.annotation.Action;
import org.apache.isis.applib.annotation.ActionLayout;
import org.apache.isis.applib.annotation.DomainService;
import org.apache.isis.applib.annotation.DomainServiceLayout;
import org.apache.isis.applib.annotation.MemberSupport;
import org.apache.isis.applib.annotation.NatureOfService;
import org.apache.isis.applib.annotation.PriorityPrecedence;
import org.apache.isis.applib.annotation.RestrictTo;
import org.apache.isis.applib.annotation.SemanticsOf;
import org.apache.isis.applib.value.LocalResourcePath;
import org.apache.isis.testing.h2console.ui.IsisModuleTestingH2ConsoleUi;
import org.apache.isis.testing.h2console.ui.webmodule.WebModuleH2Console;
@DomainService( nature = NatureOfService.VIEW )
@Named(IsisModuleTestingH2ConsoleUi.NAMESPACE + ".H2ManagerMenu")
@DomainServiceLayout( named = "Prototyping", menuBar = DomainServiceLayout.MenuBar.SECONDARY )
public class H2ManagerMenu {
    private final WebModuleH2Console webModule;
    public H2ManagerMenu(final WebModuleH2Console webModule) {
        this.webModule = webModule;
    }
    
    public static class ActionDomainEvent extends IsisModuleApplib.ActionDomainEvent<H2ManagerMenu>{}
    @Action( semantics = SemanticsOf.SAFE, restrictTo = RestrictTo.PROTOTYPING, domainEvent = ActionDomainEvent.class )
    @ActionLayout( named = "H2 Console", cssClassFa = "database", sequence = "500.800")
    public LocalResourcePath openH2Console() {
        if(webModule==null) {
            return null;
        }
        
        return webModule.getLocalResourcePathIfEnabled();
    }
    
    @MemberSupport public boolean hideOpenH2Console() { return webModule==null || webModule.getLocalResourcePathIfEnabled()==null; }
}


