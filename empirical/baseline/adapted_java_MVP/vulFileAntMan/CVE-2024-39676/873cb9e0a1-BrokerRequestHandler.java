package org.apache.pinot.broker.requesthandler;
import com.fasterxml.jackson.databind.JsonNode;
import java.util.Map;
import java.util.concurrent.Executor;
import javax.annotation.Nullable;
import javax.annotation.concurrent.ThreadSafe;
import org.apache.commons.httpclient.HttpConnectionManager;
import org.apache.pinot.broker.api.RequesterIdentity;
import org.apache.pinot.common.response.BrokerResponse;
import org.apache.pinot.spi.trace.RequestContext;
import org.apache.pinot.sql.parsers.SqlNodeAndOptions;
public interface BrokerRequestHandler {
  void start();
  void shutDown();
  BrokerResponse handleRequest(JsonNode request, @Nullable SqlNodeAndOptions sqlNodeAndOptions, @Nullable RequesterIdentity requesterIdentity, RequestContext requestContext) throws Exception;
  default BrokerResponse handleRequest(JsonNode request, @Nullable RequesterIdentity requesterIdentity, RequestContext requestContext) throws Exception {
    return handleRequest(request, null, requesterIdentity, requestContext);
  }
  
  Map<Long, String> getRunningQueries();
  boolean cancelQuery(long queryId, int timeoutMs, Executor executor, HttpConnectionManager connMgr, Map<String, Integer> serverResponses) throws Exception;
}


