package hudson.plugins.jacoco.report;
import java.io.File;
import java.io.Writer;
import org.jacoco.core.analysis.IClassCoverage;
public final class ClassReport extends AggregatedReport<PackageReport,ClassReport,MethodReport> {
    private String sourceFilePath;
    private IClassCoverage classCov;
	public void setName(String name) {
		super.setName(name.replaceAll("/", "."));
		 }
		 
	public void add(MethodReport child) {
    	String newChildName = child.getName();
    	child.setName(newChildName);
        getChildren().put(child.getName(), child);
    }
    
    public void setSrcFileInfo(IClassCoverage classCov, String sourceFilePath) {
   		this.sourceFilePath = sourceFilePath;
   		this.classCov = classCov;
   	}
   	
    public File getSourceFilePath() {
        return new File(sourceFilePath);
    }
    
    public void printHighlightedSrcFile(Writer output) {
        new SourceAnnotator(getSourceFilePath()).printHighlightedSrcFile(classCov,output);
   	}
   	
	public String toString() {
		return getClass().getSimpleName() + ":" + " instruction=" + instruction + " branch=" + branch + " complexity=" + complexity + " line=" + line + " method=" + method;
	}
	
}


