commit cc05792346fb017eaa961ee7d35cf1f9bb53bb0a
Author: Matthias Liedtke <mliedtke@chromium.org>
Date:   Fri May 10 10:38:29 2024 +0200

    [builtins] HasOnlySimpleElements is false for non-JSObjects
    
    Bug: 338908243
    Change-Id: I91139167fb186d56db1695a05e0173069c6c195b
    Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/5529235
    Auto-Submit: Matthias Liedtke <mliedtke@chromium.org>
    Commit-Queue: Jakob Kummerow <jkummerow@chromium.org>
    Commit-Queue: Matthias Liedtke <mliedtke@chromium.org>
    Reviewed-by: Jakob Kummerow <jkummerow@chromium.org>
    Cr-Commit-Position: refs/heads/main@{#93820}

diff --git a/src/builtins/builtins-array.cc b/src/builtins/builtins-array.cc
index b6b7c7c74d4..820fb2e272d 100644
--- a/src/builtins/builtins-array.cc
+++ b/src/builtins/builtins-array.cc
@@ -51,7 +51,7 @@ inline bool HasOnlySimpleElements(Isolate* isolate,
   DisallowGarbageCollection no_gc;
   PrototypeIterator iter(isolate, receiver, kStartAtReceiver);
   for (; !iter.IsAtEnd(); iter.Advance()) {
-    if (IsJSProxy(iter.GetCurrent())) return false;
+    if (!IsJSObject(iter.GetCurrent())) return false;
     Tagged<JSObject> current = iter.GetCurrent<JSObject>();
     if (!HasSimpleElements(current)) return false;
   }
