commit 092904b80edbc4dce315684a59cc3184c45c1b70
Author: Aurelien David <aurelien.david@telecom-paristech.fr>
Date:   Thu Oct 12 12:26:50 2023 +0200

    fix 5692dc7: make test more strict (#2627)

diff --git a/src/filters/reframe_ac3.c b/src/filters/reframe_ac3.c
index 7b6452ed7..a73455978 100644
--- a/src/filters/reframe_ac3.c
+++ b/src/filters/reframe_ac3.c
@@ -480,12 +480,11 @@ restart:
 			cts = GF_FILTER_NO_TS;
 		}
 
-		if (!ctx->in_seek && remain >= ctx->hdr.framesize) {
+		if (!ctx->in_seek && remain >= sync_pos + ctx->hdr.framesize) {
 			dst_pck = gf_filter_pck_new_alloc(ctx->opid, ctx->hdr.framesize, &output);
 			if (!dst_pck) return GF_OUT_OF_MEM;
 
 			if (ctx->src_pck) gf_filter_pck_merge_properties(ctx->src_pck, dst_pck);
-
 			memcpy(output, sync, ctx->hdr.framesize);
 			gf_filter_pck_set_dts(dst_pck, ctx->cts);
 			gf_filter_pck_set_cts(dst_pck, ctx->cts);
