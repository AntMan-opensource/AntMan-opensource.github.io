commit e2f13d3747577937152346b031b86639b37bc2b5
Author: Liviu Chircu <liviu@opensips.org>
Date:   Wed Mar 16 12:15:41 2022 +0200

    dispatcher: Fix IP printing on error case
    
    Many thanks to @Cossack9989 for the report!
    
    Fixes #2780

diff --git a/modules/dispatcher/dispatch.c b/modules/dispatcher/dispatch.c
index eb19bd5e0..6bba3c5ee 100644
--- a/modules/dispatcher/dispatch.c
+++ b/modules/dispatcher/dispatch.c
@@ -2310,7 +2310,7 @@ int ds_is_in_list(struct sip_msg *_m, str *_ip, int port, int set,
 	char *pattern = NULL;
 
 	if (!(ip = str2ip(_ip)) && !(ip = str2ip6(_ip))) {
-		LM_ERR("IP val is not IP <%.*s>\n",val.rs.len,val.rs.s);
+		LM_ERR("IP val is not IP <%.*s>\n", _ip->len, _ip->s);
 		return -1;
 	}
 
