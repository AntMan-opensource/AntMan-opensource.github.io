commit b1b323042264740c398140da32e93fb9c2c9f33e
Author: Mihai Maruseac <mihaimaruseac@google.com>
Date:   Thu May 6 14:51:41 2021 -0700

    Fix SEGV in CTC ops
    
    PiperOrigin-RevId: 372430279
    Change-Id: I7ec2ad9d6f4d0980c33de45d27c6b17df5c6e26f

diff --git a/tensorflow/core/kernels/ctc_decoder_ops.cc b/tensorflow/core/kernels/ctc_decoder_ops.cc
index 22681f97437..9efdac60e36 100644
--- a/tensorflow/core/kernels/ctc_decoder_ops.cc
+++ b/tensorflow/core/kernels/ctc_decoder_ops.cc
@@ -70,6 +70,9 @@ class CTCDecodeHelper {
     if (inputs_shape.dims() != 3) {
       return errors::InvalidArgument("inputs is not a 3-Tensor");
     }
+    if (inputs_shape.num_elements() == 0) {
+      return errors::InvalidArgument("inputs must not be empty");
+    }
 
     const int64 max_time = inputs_shape.dim_size(0);
     const int64 batch_size = inputs_shape.dim_size(1);
