commit be7a4de6adfbd303ce08be4332554dff70362612
Author: Laura Pak <lpak@google.com>
Date:   Thu Jul 29 14:05:34 2021 -0700

    Ensure non-empty rt_nested_splits in tf.raw_ops.RaggedTensorToVariant
    
    PiperOrigin-RevId: 387664237
    Change-Id: Ia1700c34b5610873d63561abc86e23b46ead93b3

diff --git a/tensorflow/core/kernels/ragged_tensor_to_variant_op.cc b/tensorflow/core/kernels/ragged_tensor_to_variant_op.cc
index 687289cd380..ab86863e3a9 100644
--- a/tensorflow/core/kernels/ragged_tensor_to_variant_op.cc
+++ b/tensorflow/core/kernels/ragged_tensor_to_variant_op.cc
@@ -157,6 +157,12 @@ class RaggedTensorToVariantOp : public OpKernel {
       return;
     }
 
+    // Checked here instead of at input in case batched_input_ is false
+    OP_REQUIRES(context, ragged_nested_splits_len > 0,
+                errors::InvalidArgument(
+                    "rt_nested_splits must be a list of one or more, but "
+                    "received rt_nested_splits of length 0."));
+
     // Unbatch the Ragged Tensor and encode the components.
     std::vector<RaggedTensorVariant> unbatched_ragged_input;
     auto batched_splits_top_vec =
