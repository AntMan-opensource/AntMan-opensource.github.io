commit a2dca48d665c8771e9943ff4becb6e48d37ad517
Author: Mitko Iliev <imitko@openlinksw.com>
Date:   Wed Nov 15 15:32:41 2023 +0100

    Fixed issue with setting type before col assign function (fixes #1178)

diff --git a/libsrc/Wi/sqlvec.c b/libsrc/Wi/sqlvec.c
index 25071564f..eb7b9739b 100644
--- a/libsrc/Wi/sqlvec.c
+++ b/libsrc/Wi/sqlvec.c
@@ -4046,12 +4046,12 @@ sqlg_vec_ts (sql_comp_t * sc, table_source_t * ts)
 	else
 	  ks->ks_v_out_map[inx].om_cl = *key_find_cl (ks->ks_key, col_id);
 	ks->ks_v_out_map[inx].om_ssl = ssl;
+	  ssl_set_dc_type (ssl);
 	if (col)
 	  ks->ks_v_out_map[inx].om_ref = col_ref_func (ks->ks_key, col, ks->ks_v_out_map[inx].om_ssl);
 	ssl->ssl_type = SSL_VEC;
 	if (!ssl->ssl_box_index)
 	  ssl->ssl_box_index = cc_new_instance_slot (sc->sc_cc);
-	ssl_set_dc_type (ssl);
       }
     ASG_SSL (NULL, NULL, ssl);
     t_set_delete (&sc->sc_ssl_prereset_only, (void *) ssl);	/* in a proc view the row ctr is assigned first in precode and then in the ts, must be in the continue reset list, else will overflow */
