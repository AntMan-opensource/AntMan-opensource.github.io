commit cb9c5518905ea370954a59903ff747650c6edd40
Author: David Tschumperle <David.Tschumperle@unicaen.fr>
Date:   Sun Nov 26 09:41:53 2023 +0100

    load_analyze(): better check for corrupted files.

diff --git a/CImg.h b/CImg.h
index eb541df..7aaba37 100644
--- a/CImg.h
+++ b/CImg.h
@@ -56071,7 +56071,7 @@ namespace cimg_library {
 
       unsigned char *const header = new unsigned char[header_size];
       const size_t header_size_read = cimg::fread(header + 4,header_size - 4,nfile_header);
-      if (header_size_read!=header_size)
+      if (header_size_read!=header_size - 4)
         throw CImgIOException(_cimg_instance
                               "load_analyze(): Cannot read header (of size %u) in file '%s'.",
                               cimg_instance,
