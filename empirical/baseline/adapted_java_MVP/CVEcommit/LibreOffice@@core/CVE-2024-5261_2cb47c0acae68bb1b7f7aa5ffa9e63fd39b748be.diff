commit 2cb47c0acae68bb1b7f7aa5ffa9e63fd39b748be
Author: Thorsten Behrens <thorsten.behrens@allotropia.de>
Date:   Thu May 16 17:52:41 2024 +0200

    backport curl_easy_setopt changes
    
    This reverts commit d95ac1c608caba9cabaa503f1a5589285547aed5.
    
    Change-Id: I4bc104272d4c41efab1a7e5eae78267675c1b32b
    Reviewed-on: https://gerrit.libreoffice.org/c/core/+/167753
    Tested-by: Jenkins
    Reviewed-by: Andras Timar <andras.timar@collabora.com>
    Reviewed-on: https://gerrit.libreoffice.org/c/core/+/167805
    Reviewed-by: Caol√°n McNamara <caolan.mcnamara@collabora.com>

diff --git a/ucb/source/ucp/webdav-curl/CurlSession.cxx b/ucb/source/ucp/webdav-curl/CurlSession.cxx
index 2f104d5388d7..bfd0825d8cff 100644
--- a/ucb/source/ucp/webdav-curl/CurlSession.cxx
+++ b/ucb/source/ucp/webdav-curl/CurlSession.cxx
@@ -15,7 +15,6 @@
 #include "webdavresponseparser.hxx"
 
 #include <comphelper/attributelist.hxx>
-#include <comphelper/lok.hxx>
 #include <comphelper/scopeguard.hxx>
 #include <comphelper/string.hxx>
 
@@ -689,14 +688,6 @@ CurlSession::CurlSession(uno::Reference<uno::XComponentContext> xContext,
         rc = curl_easy_setopt(m_pCurl.get(), CURLOPT_FORBID_REUSE, 1L);
         assert(rc == CURLE_OK);
     }
-    // If WOPI-like host has self-signed certificate, it's not possible to insert images
-    // to the document, so here is a compromise. The user has already accepted the self
-    // signed certificate in the browser, when we get here.
-    if (comphelper::LibreOfficeKit::isActive())
-    {
-        rc = curl_easy_setopt(m_pCurl.get(), CURLOPT_SSL_VERIFYPEER, 0L);
-        assert(rc == CURLE_OK);
-    }
 }
 
 CurlSession::~CurlSession() {}
